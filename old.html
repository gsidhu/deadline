<!DOCTYPE html>
<html>
<head>
<title>Deadline</title>
<!-- Bootstrap v5.2.0 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<!-- Confetti animation -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<!-- jQuery 3.6.0 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<style>
  th, td {
    text-align: center;
  }
  .red {
    background-color: #fa000070 !important;
  }
  #yes-msg, #no-msg {
    display: none;
  }
</style>
</head>
<body>
  <header>
    <div class="navbar navbar-dark bg-dark shadow-sm">
      <div class="container">
        <div href="#" class="navbar-brand d-flex align-items-center">
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-mortarboard mx-2" viewBox="0 0 16 16"><path d="M8.211 2.047a.5.5 0 0 0-.422 0l-7.5 3.5a.5.5 0 0 0 .025.917l7.5 3a.5.5 0 0 0 .372 0L14 7.14V13a1 1 0 0 0-1 1v2h3v-2a1 1 0 0 0-1-1V6.739l.686-.275a.5.5 0 0 0 .025-.917l-7.5-3.5ZM8 8.46 1.758 5.965 8 3.052l6.242 2.913L8 8.46Z"/><path d="M4.176 9.032a.5.5 0 0 0-.656.327l-.5 1.7a.5.5 0 0 0 .294.605l4.5 1.8a.5.5 0 0 0 .372 0l4.5-1.8a.5.5 0 0 0 .294-.605l-.5-1.7a.5.5 0 0 0-.656-.327L8 10.466 4.176 9.032Zm-.068 1.873.22-.748 3.496 1.311a.5.5 0 0 0 .352 0l3.496-1.311.22.748L8 12.46l-3.892-1.556Z"/></svg>
          </div>
          <div>
            <span style="text-align: center;"><strong>Poopoo <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg> Dr. Poopoo</strong></span>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <main>
    <section class="py-3 text-center container">
      <div class="row py-lg-4">
        <div class="col-lg-6 col-md-8 mx-auto">
          <h1 class="fw-light py-2" id="msg">Did you write 600 words today?</h1>
          <h1 class="fw-light py-2" id="yes-msg">Yay! Way to go! <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-suit-heart-fill" viewBox="0 0 16 16">
            <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"/>
          </svg></h1>
          <h1 class="fw-light py-2" id="no-msg">Issokay bb I love you still :*</h1>
          <p class="py-2" id="yes-no-buttons">
            <button class="btn btn-success my-2 mx-3" style="width: 7rem; line-height: 2rem;" onclick="addWords(600)">Yes!</button>
            <button href="#" class="btn btn-warning my-2 mx-3" style="width: 7rem; line-height: 2rem;" onclick="noWords()">No...</button>
          </p>

          <div class="progress">
            <div id="progress-done" class="progress-bar-striped bg-success progress-bar-animated" role="progressbar" aria-label="Segment one" style="width: 0%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
            <div id="progress-left" class="progress-bar-striped bg-warning progress-bar-animated" role="progressbar" aria-label="Segment two" style="width: 100%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
          </div>

          <p class="lead text-muted py-2">You have written <span id="words-written"></span> words so far and have <span id='words-left'></span> words left.</p>
        </div>
      </div>
      <div class="d-flex justify-content-between">
        <div class="d-flex align-items-center">
          <p class="text-muted mx-2" style="text-decoration: underline; cursor: pointer;" onclick="toggleWordInput()">Change word count.</p>
          <p id="word-input" class="d-none mx-2">
            <input>
            <svg onclick="changeWordCount()" style="cursor: pointer;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-right-circle" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/></svg>
          </p>
        </div>
        <p class='text-muted' onclick="celebrate()" style="text-decoration: underline; cursor: pointer;">Celebrate!</p>
      </div>
    </section>

    <div class="album py-5 bg-light">
      <div class="container">
        <p class="text-center lead text-muted">You have <span id="days-left"></span> days till your deadline.</p>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          <div class="col">
            <div class="card shadow-sm">
              <div class="card-body">
                <p><small class="text-muted">August 2022</small></p>
                <p class="card-text">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th scope="col">S</th>
                        <th scope="col">M</th>
                        <th scope="col">T</th>
                        <th scope="col">W</th>
                        <th scope="col">T</th>
                        <th scope="col">F</th>
                        <th scope="col">S</th>
                      </tr>
                    </thead>
                    <tbody class="table-group-divider">
                      <tr>
                        <td></td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                      </tr>
                      <tr>
                        <td>7</td>
                        <td>8</td>
                        <td>9</td>
                        <td>10</td>
                        <td>11</td>
                        <td>12</td>
                        <td>13</td>
                      </tr>
                      <tr>
                        <td>14</td>
                        <td>15</td>
                        <td>16</td>
                        <td>17</td>
                        <td>18</td>
                        <td>19</td>
                        <td>20</td>
                      </tr>
                      <tr>
                        <td>21</td>
                        <td>22</td>
                        <td>23</td>
                        <td>24</td>
                        <td>25</td>
                        <td>26</td>
                        <td>27</td>
                      </tr>
                      <tr>
                        <td>28</td>
                        <td>29</td>
                        <td>30</td>
                        <td>31</td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <div class="card-body">
                <p><small class="text-muted">September 2022</small></p>
                <p class="card-text">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th scope="col">S</th>
                        <th scope="col">M</th>
                        <th scope="col">T</th>
                        <th scope="col">W</th>
                        <th scope="col">T</th>
                        <th scope="col">F</th>
                        <th scope="col">S</th>
                      </tr>
                    </thead>
                    <tbody class="table-group-divider">
                      <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                      </tr>
                      <tr>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                        <td>8</td>
                        <td>9</td>
                        <td>10</td>
                      </tr>
                      <tr>
                        <td>11</td>
                        <td>12</td>
                        <td>13</td>
                        <td>14</td>
                        <td>15</td>
                        <td>16</td>
                        <td>17</td>
                      </tr>
                      <tr>
                        <td>18</td>
                        <td>19</td>
                        <td>20</td>
                        <td>21</td>
                        <td>22</td>
                        <td>23</td>
                        <td>24</td>
                      </tr>
                      <tr>
                        <td>25</td>
                        <td>26</td>
                        <td>27</td>
                        <td>28</td>
                        <td>29</td>
                        <td>30</td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <div class="card-body">
                <p><small class="text-muted">October 2022</small></p>
                <p class="card-text">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th scope="col">S</th>
                        <th scope="col">M</th>
                        <th scope="col">T</th>
                        <th scope="col">W</th>
                        <th scope="col">T</th>
                        <th scope="col">F</th>
                        <th scope="col">S</th>
                      </tr>
                    </thead>
                    <tbody class="table-group-divider">
                      <tr>
                        <td>30</td>
                        <td>31</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                        <td>8</td>
                      </tr>
                      <tr>
                        <td>9</td>
                        <td>10</td>
                        <td>11</td>
                        <td>12</td>
                        <td>13</td>
                        <td>14</td>
                        <td>15</td>
                      </tr>
                      <tr>
                        <td>16</td>
                        <td>17</td>
                        <td>18</td>
                        <td>19</td>
                        <td>20</td>
                        <td>21</td>
                        <td>22</td>
                      </tr>
                      <tr>
                        <td>23</td>
                        <td>24</td>
                        <td>25</td>
                        <td>26</td>
                        <td>27</td>
                        <td>28</td>
                        <td>29</td>
                      </tr>
                    </tbody>
                  </table>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>  


  <footer class="text-muted py-5">
    <div class="container">
      <p class="float-end mb-0">I love you.</p>
      <p class="mb-0">You got this.</p>
      <p class="text-center mb-0 pt-5 pb-0" onclick="firstSetup()" style="text-decoration: underline; cursor: pointer;"><small>reset.</small></p>
    </div>
  </footer>
  <script>
    const date = new Date();
    const deadline = new Date('2022-10-31');
    const diffTime = Math.abs(deadline - date);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    document.getElementById('days-left').textContent = diffDays

    function firstSetup() {
      localStorage.setItem('words-written', 0)
      // const date = new Date()
      // if (date.getMonth() === 7) {localStorage.setItem('days-passed', date.getDate())}
      localStorage.setItem('days-passed', 0)
      localStorage.setItem('last-date', '2022-08-01')
    }
    function daysPassed() {
      var dated = new Date(date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate())
      var lastDate = new Date(localStorage.getItem('last-date'))
      var diffTimed = Math.abs(dated - lastDate);
      var diffDayss = Math.ceil(diffTimed / (1000 * 60 * 60 * 24));
      var oldDaysPassed = localStorage.getItem('days-passed')
      
      localStorage.setItem('days-passed', parseInt(diffDayss) + parseInt(oldDaysPassed))
      localStorage.setItem('last-date', dated.getFullYear() + '-' + (dated.getMonth() + 1) + '-' + dated.getDate())
      let tds = document.getElementsByTagName('td')
      for (var i=0; i <= localStorage.getItem('days-passed'); i++) {
        if (tds[i].textContent != '') {
          tds[i].classList.add('red')
        }
      }
    }
    daysPassed()

    function addWords(newWords) {
      let words = localStorage.getItem('words-written')
      words = parseInt(words) + parseInt(newWords)
      localStorage.setItem('words-written', words)
      updateWordCount()
      celebrate()
      document.getElementById('msg').classList.add('d-none')
      $("#yes-msg").fadeIn("slow");
      $("#yes-no-buttons").animate({"opacity": 0.01}, 800)
      $("button").prop("disabled",true);
    }
    function updateWordCount() {
      document.getElementById('words-written').textContent = localStorage.getItem('words-written')
      document.getElementById('words-left').textContent = 50000 - parseInt(localStorage.getItem('words-written'))
      calculateProgress()
    }
    updateWordCount()

    function toggleWordInput() {
      document.getElementById("word-input").classList.toggle('d-none')
    }
    function changeWordCount() {
      const words = document.getElementsByTagName('input')[0].value
      const prevWords = localStorage.getItem('words-written')
      localStorage.setItem('words-written', words)
      updateWordCount()
      toggleWordInput()
      if (prevWords < words) {celebrate()}
    }

    function calculateProgress() {
      let done = (100*parseInt(localStorage.getItem('words-written')))/50000
      document.getElementById("progress-done").style.width = done + '%'
      document.getElementById("progress-left").style.width = 100 - done + '%'
    }
    calculateProgress()

    function celebrate() {
      let xray = Math.random()
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6, x: xray > 0.7 | xray < 0.3 ? 0.5 : xray }
      });
    }

    function noWords() {
      document.getElementById('msg').classList.add('d-none')
      $("#no-msg").fadeIn("slow");
      $("#yes-no-buttons").animate({"opacity": 0.01}, 800)
      $("button").prop("disabled",true);
    }
  </script>
</body>
</html>